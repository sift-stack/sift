# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: sift/report_templates/v1/report_templates.proto
# plugin: python-betterproto2
# This file has been @generated

__all__ = (
    "CreateReportTemplateRequest",
    "CreateReportTemplateRequestClientKeys",
    "CreateReportTemplateRequestRuleIds",
    "CreateReportTemplateResponse",
    "GetReportTemplateRequest",
    "GetReportTemplateResponse",
    "ListReportTemplatesRequest",
    "ListReportTemplatesResponse",
    "ReportTemplate",
    "ReportTemplateRule",
    "ReportTemplateTag",
    "UpdateReportTemplateRequest",
    "UpdateReportTemplateResponse",
    "ReportTemplateServiceStub",
    "ReportTemplateServiceBase",
)

import datetime
from dataclasses import dataclass
from typing import TYPE_CHECKING

import betterproto2
import grpc
import grpclib
from betterproto2.grpc.grpclib_server import ServiceBase

from ....message_pool import default_message_pool

if TYPE_CHECKING:
    import grpclib.server
    from betterproto2.grpc.grpclib_client import MetadataLike
    from grpclib.metadata import Deadline

betterproto2.check_compiler_version("0.4.0")


@dataclass(eq=False, repr=False)
class CreateReportTemplateRequest(betterproto2.Message):
    """
    The request of a call to `ReportTemplateService_CreateReportTemplate` to create a report template.

    Oneofs:
        - rule_identifiers:
    """

    name: "str" = betterproto2.field(1, betterproto2.TYPE_STRING)

    client_key: "str | None" = betterproto2.field(
        2, betterproto2.TYPE_STRING, optional=True
    )

    description: "str | None" = betterproto2.field(
        3, betterproto2.TYPE_STRING, optional=True
    )

    tag_names: "list[str]" = betterproto2.field(
        4, betterproto2.TYPE_STRING, repeated=True
    )

    organization_id: "str" = betterproto2.field(6, betterproto2.TYPE_STRING)
    """
    `organization_id` is only required if your user belongs to multiple organizations
    """

    rule_ids: "CreateReportTemplateRequestRuleIds | None" = betterproto2.field(
        7, betterproto2.TYPE_MESSAGE, optional=True, group="rule_identifiers"
    )

    rule_client_keys: "CreateReportTemplateRequestClientKeys | None" = (
        betterproto2.field(
            8, betterproto2.TYPE_MESSAGE, optional=True, group="rule_identifiers"
        )
    )


default_message_pool.register_message(
    "sift.report_templates.v1",
    "CreateReportTemplateRequest",
    CreateReportTemplateRequest,
)


@dataclass(eq=False, repr=False)
class CreateReportTemplateRequestClientKeys(betterproto2.Message):
    rule_client_keys: "list[str]" = betterproto2.field(
        1, betterproto2.TYPE_STRING, repeated=True
    )


default_message_pool.register_message(
    "sift.report_templates.v1",
    "CreateReportTemplateRequestClientKeys",
    CreateReportTemplateRequestClientKeys,
)


@dataclass(eq=False, repr=False)
class CreateReportTemplateRequestRuleIds(betterproto2.Message):
    rule_ids: "list[str]" = betterproto2.field(
        1, betterproto2.TYPE_STRING, repeated=True
    )


default_message_pool.register_message(
    "sift.report_templates.v1",
    "CreateReportTemplateRequestRuleIds",
    CreateReportTemplateRequestRuleIds,
)


@dataclass(eq=False, repr=False)
class CreateReportTemplateResponse(betterproto2.Message):
    """
    The response of a call to `ReportTemplateService_CreateReportTemplate` to create a report template.
    """

    report_template: "ReportTemplate | None" = betterproto2.field(
        1, betterproto2.TYPE_MESSAGE, optional=True
    )


default_message_pool.register_message(
    "sift.report_templates.v1",
    "CreateReportTemplateResponse",
    CreateReportTemplateResponse,
)


@dataclass(eq=False, repr=False)
class GetReportTemplateRequest(betterproto2.Message):
    """
    The request for a call to `ReportTemplateService_GetReportTemplate` to retrieve a report template.
    If `report_template_id` is provided then all other arguments will be ignored. The argument `report_template_id`
    should not be used together with `client_key`. The `organization_id` argument is only required
    if using `client_key` and the user belongs to multiple organizations.
    """

    report_template_id: "str" = betterproto2.field(1, betterproto2.TYPE_STRING)

    client_key: "str" = betterproto2.field(2, betterproto2.TYPE_STRING)

    organization_id: "str" = betterproto2.field(3, betterproto2.TYPE_STRING)


default_message_pool.register_message(
    "sift.report_templates.v1", "GetReportTemplateRequest", GetReportTemplateRequest
)


@dataclass(eq=False, repr=False)
class GetReportTemplateResponse(betterproto2.Message):
    """
    The request of a call to `ReportTemplateService_GetReportTemplate` to retrieve a report template.
    """

    report_template: "ReportTemplate | None" = betterproto2.field(
        1, betterproto2.TYPE_MESSAGE, optional=True
    )


default_message_pool.register_message(
    "sift.report_templates.v1", "GetReportTemplateResponse", GetReportTemplateResponse
)


@dataclass(eq=False, repr=False)
class ListReportTemplatesRequest(betterproto2.Message):
    """
    The request for a call to `ReportTemplateService_ListReportTemplates` to retrieve report templates.
    """

    page_size: "int" = betterproto2.field(1, betterproto2.TYPE_UINT32)
    """
    The maximum number of report templates to return. The service may return fewer than this value.
    If unspecified, at most 50 report templates will be returned. The maximum value is 1000; values above
    1000 will be coerced to 1000. Optional.
    """

    page_token: "str" = betterproto2.field(2, betterproto2.TYPE_STRING)
    """
    A page token, received from a previous `ListReportTemplates` call.
    Provide this to retrieve the subsequent page.
    When paginating, all other parameters provided to `ListReportTemplates` must match
    the call that provided the page token. Optional.
    """

    filter: "str" = betterproto2.field(3, betterproto2.TYPE_STRING)
    """
    A [Common Expression Language (CEL)](https://github.com/google/cel-spec) filter string.
    Available fields to filter by are `report_template_id`, `tag_id`, `tag_name`, `client_key`, and `name`.
    For further information about how to use CELs, please refer to [this guide](https://github.com/google/cel-spec/blob/master/doc/langdef.md#standard-definitions).
    For more information about the fields used for filtering, please refer to [this definition](/docs/api/grpc/protocol-buffers/report_templates#report_template). Optional.
    """

    organization_id: "str" = betterproto2.field(4, betterproto2.TYPE_STRING)
    """
    This field is only required if your user belongs to multiple organizations.
    """

    include_archived: "bool" = betterproto2.field(5, betterproto2.TYPE_BOOL)
    """
    If `true` then archived report templates will be included in the query. Defaults to `false`.
    """

    order_by: "str" = betterproto2.field(6, betterproto2.TYPE_STRING)
    """
    How to order the retrieved report templates. Formatted as a comma-separated string i.e. "FIELD_NAME[ desc],...".
    Available fields to order_by are `created_date` and `modified_date`.
    If left empty, items are ordered by `created_date` in ascending order (oldest-first).
    For more information about the format of this field, read [this](https://google.aip.dev/132#ordering)
    Example: "created_date desc,modified_date"
    """


default_message_pool.register_message(
    "sift.report_templates.v1", "ListReportTemplatesRequest", ListReportTemplatesRequest
)


@dataclass(eq=False, repr=False)
class ListReportTemplatesResponse(betterproto2.Message):
    """
    The response of a call to `ReportTemplateService_ListReportTemplatesResponse`.
    """

    report_templates: "list[ReportTemplate]" = betterproto2.field(
        1, betterproto2.TYPE_MESSAGE, repeated=True
    )

    next_page_token: "str" = betterproto2.field(2, betterproto2.TYPE_STRING)


default_message_pool.register_message(
    "sift.report_templates.v1",
    "ListReportTemplatesResponse",
    ListReportTemplatesResponse,
)


@dataclass(eq=False, repr=False)
class ReportTemplate(betterproto2.Message):
    report_template_id: "str" = betterproto2.field(1, betterproto2.TYPE_STRING)

    organization_id: "str" = betterproto2.field(2, betterproto2.TYPE_STRING)

    client_key: "str | None" = betterproto2.field(
        3, betterproto2.TYPE_STRING, optional=True
    )

    name: "str" = betterproto2.field(4, betterproto2.TYPE_STRING)

    description: "str | None" = betterproto2.field(
        5, betterproto2.TYPE_STRING, optional=True
    )

    archived_date: "datetime.datetime | None" = betterproto2.field(
        6, betterproto2.TYPE_MESSAGE, optional=True
    )

    created_by_user_id: "str" = betterproto2.field(7, betterproto2.TYPE_STRING)

    modified_by_user_id: "str" = betterproto2.field(8, betterproto2.TYPE_STRING)

    created_date: "datetime.datetime | None" = betterproto2.field(
        9, betterproto2.TYPE_MESSAGE, optional=True
    )

    modified_date: "datetime.datetime | None" = betterproto2.field(
        10, betterproto2.TYPE_MESSAGE, optional=True
    )

    rules: "list[ReportTemplateRule]" = betterproto2.field(
        11, betterproto2.TYPE_MESSAGE, repeated=True
    )

    tags: "list[ReportTemplateTag]" = betterproto2.field(
        12, betterproto2.TYPE_MESSAGE, repeated=True
    )


default_message_pool.register_message(
    "sift.report_templates.v1", "ReportTemplate", ReportTemplate
)


@dataclass(eq=False, repr=False)
class ReportTemplateRule(betterproto2.Message):
    rule_id: "str" = betterproto2.field(1, betterproto2.TYPE_STRING)

    rule_version_id: "str" = betterproto2.field(2, betterproto2.TYPE_STRING)

    rule_version_number: "int" = betterproto2.field(3, betterproto2.TYPE_UINT32)

    client_key: "str" = betterproto2.field(4, betterproto2.TYPE_STRING)


default_message_pool.register_message(
    "sift.report_templates.v1", "ReportTemplateRule", ReportTemplateRule
)


@dataclass(eq=False, repr=False)
class ReportTemplateTag(betterproto2.Message):
    tag_name: "str" = betterproto2.field(1, betterproto2.TYPE_STRING)


default_message_pool.register_message(
    "sift.report_templates.v1", "ReportTemplateTag", ReportTemplateTag
)


@dataclass(eq=False, repr=False)
class UpdateReportTemplateRequest(betterproto2.Message):
    """
    The request for a call to `ReportTemplateService_UpdateReportTemplate` to update a report template. When updating
    tags or rules, the update will perform a full replace. Additionally, when updating rules, only the rule ID or the rule client key
    is required, but it is okay to provide both. If some rules contain only client keys and others only rule IDs, they will be consolidated.
    """

    report_template: "ReportTemplate | None" = betterproto2.field(
        1, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The report template to update.
    """

    update_mask: "___google__protobuf__.FieldMask | None" = betterproto2.field(
        2, betterproto2.TYPE_MESSAGE, optional=True
    )
    """
    The list of fields to be updated. The fields available to be updated are `name`, `archived_date`, `description`, `tags`, and `rules`.
    """


default_message_pool.register_message(
    "sift.report_templates.v1",
    "UpdateReportTemplateRequest",
    UpdateReportTemplateRequest,
)


@dataclass(eq=False, repr=False)
class UpdateReportTemplateResponse(betterproto2.Message):
    """
    The response of a call to `ReportTemplateService_UpdateReportTemplate`.
    """

    report_template: "ReportTemplate | None" = betterproto2.field(
        1, betterproto2.TYPE_MESSAGE, optional=True
    )


default_message_pool.register_message(
    "sift.report_templates.v1",
    "UpdateReportTemplateResponse",
    UpdateReportTemplateResponse,
)


class ReportTemplateServiceStub:
    def __init__(self, channel: grpc.Channel):
        self._channel = channel

    def get_report_template(
        self, message: "GetReportTemplateRequest"
    ) -> "GetReportTemplateResponse":
        """
        Retrieve a report template.
        """

        return self._channel.unary_unary(
            "/sift.report_templates.v1.ReportTemplateService/GetReportTemplate",
            GetReportTemplateRequest.SerializeToString,
            GetReportTemplateResponse.FromString,
        )(message)

    def create_report_template(
        self, message: "CreateReportTemplateRequest"
    ) -> "CreateReportTemplateResponse":
        """
        Create a report template.
        """

        return self._channel.unary_unary(
            "/sift.report_templates.v1.ReportTemplateService/CreateReportTemplate",
            CreateReportTemplateRequest.SerializeToString,
            CreateReportTemplateResponse.FromString,
        )(message)

    def list_report_templates(
        self, message: "ListReportTemplatesRequest"
    ) -> "ListReportTemplatesResponse":
        """
        List report templates.
        """

        return self._channel.unary_unary(
            "/sift.report_templates.v1.ReportTemplateService/ListReportTemplates",
            ListReportTemplatesRequest.SerializeToString,
            ListReportTemplatesResponse.FromString,
        )(message)

    def update_report_template(
        self, message: "UpdateReportTemplateRequest"
    ) -> "UpdateReportTemplateResponse":
        """
        Updates an existing report template using the list of fields specified in `update_mask`.
        """

        return self._channel.unary_unary(
            "/sift.report_templates.v1.ReportTemplateService/UpdateReportTemplate",
            UpdateReportTemplateRequest.SerializeToString,
            UpdateReportTemplateResponse.FromString,
        )(message)


class ReportTemplateServiceAsyncStub(betterproto2.ServiceStub):
    async def get_report_template(
        self,
        message: "GetReportTemplateRequest",
        *,
        timeout: "float | None" = None,
        deadline: "Deadline | None" = None,
        metadata: "MetadataLike | None" = None,
    ) -> "GetReportTemplateResponse":
        """
        Retrieve a report template.
        """

        return await self._unary_unary(
            "/sift.report_templates.v1.ReportTemplateService/GetReportTemplate",
            message,
            GetReportTemplateResponse,
            timeout=timeout,
            deadline=deadline,
            metadata=metadata,
        )

    async def create_report_template(
        self,
        message: "CreateReportTemplateRequest",
        *,
        timeout: "float | None" = None,
        deadline: "Deadline | None" = None,
        metadata: "MetadataLike | None" = None,
    ) -> "CreateReportTemplateResponse":
        """
        Create a report template.
        """

        return await self._unary_unary(
            "/sift.report_templates.v1.ReportTemplateService/CreateReportTemplate",
            message,
            CreateReportTemplateResponse,
            timeout=timeout,
            deadline=deadline,
            metadata=metadata,
        )

    async def list_report_templates(
        self,
        message: "ListReportTemplatesRequest",
        *,
        timeout: "float | None" = None,
        deadline: "Deadline | None" = None,
        metadata: "MetadataLike | None" = None,
    ) -> "ListReportTemplatesResponse":
        """
        List report templates.
        """

        return await self._unary_unary(
            "/sift.report_templates.v1.ReportTemplateService/ListReportTemplates",
            message,
            ListReportTemplatesResponse,
            timeout=timeout,
            deadline=deadline,
            metadata=metadata,
        )

    async def update_report_template(
        self,
        message: "UpdateReportTemplateRequest",
        *,
        timeout: "float | None" = None,
        deadline: "Deadline | None" = None,
        metadata: "MetadataLike | None" = None,
    ) -> "UpdateReportTemplateResponse":
        """
        Updates an existing report template using the list of fields specified in `update_mask`.
        """

        return await self._unary_unary(
            "/sift.report_templates.v1.ReportTemplateService/UpdateReportTemplate",
            message,
            UpdateReportTemplateResponse,
            timeout=timeout,
            deadline=deadline,
            metadata=metadata,
        )


from ....google import protobuf as ___google__protobuf__


class ReportTemplateServiceBase(ServiceBase):
    async def get_report_template(
        self, message: "GetReportTemplateRequest"
    ) -> "GetReportTemplateResponse":
        """
        Retrieve a report template.
        """

        raise grpclib.GRPCError(grpclib.const.Status.UNIMPLEMENTED)

    async def create_report_template(
        self, message: "CreateReportTemplateRequest"
    ) -> "CreateReportTemplateResponse":
        """
        Create a report template.
        """

        raise grpclib.GRPCError(grpclib.const.Status.UNIMPLEMENTED)

    async def list_report_templates(
        self, message: "ListReportTemplatesRequest"
    ) -> "ListReportTemplatesResponse":
        """
        List report templates.
        """

        raise grpclib.GRPCError(grpclib.const.Status.UNIMPLEMENTED)

    async def update_report_template(
        self, message: "UpdateReportTemplateRequest"
    ) -> "UpdateReportTemplateResponse":
        """
        Updates an existing report template using the list of fields specified in `update_mask`.
        """

        raise grpclib.GRPCError(grpclib.const.Status.UNIMPLEMENTED)

    async def __rpc_get_report_template(
        self,
        stream: "grpclib.server.Stream[GetReportTemplateRequest, GetReportTemplateResponse]",
    ) -> None:
        request = await stream.recv_message()
        response = await self.get_report_template(request)
        await stream.send_message(response)

    async def __rpc_create_report_template(
        self,
        stream: "grpclib.server.Stream[CreateReportTemplateRequest, CreateReportTemplateResponse]",
    ) -> None:
        request = await stream.recv_message()
        response = await self.create_report_template(request)
        await stream.send_message(response)

    async def __rpc_list_report_templates(
        self,
        stream: "grpclib.server.Stream[ListReportTemplatesRequest, ListReportTemplatesResponse]",
    ) -> None:
        request = await stream.recv_message()
        response = await self.list_report_templates(request)
        await stream.send_message(response)

    async def __rpc_update_report_template(
        self,
        stream: "grpclib.server.Stream[UpdateReportTemplateRequest, UpdateReportTemplateResponse]",
    ) -> None:
        request = await stream.recv_message()
        response = await self.update_report_template(request)
        await stream.send_message(response)

    def __mapping__(self) -> "dict[str, grpclib.const.Handler]":
        return {
            "/sift.report_templates.v1.ReportTemplateService/GetReportTemplate": grpclib.const.Handler(
                self.__rpc_get_report_template,
                grpclib.const.Cardinality.UNARY_UNARY,
                GetReportTemplateRequest,
                GetReportTemplateResponse,
            ),
            "/sift.report_templates.v1.ReportTemplateService/CreateReportTemplate": grpclib.const.Handler(
                self.__rpc_create_report_template,
                grpclib.const.Cardinality.UNARY_UNARY,
                CreateReportTemplateRequest,
                CreateReportTemplateResponse,
            ),
            "/sift.report_templates.v1.ReportTemplateService/ListReportTemplates": grpclib.const.Handler(
                self.__rpc_list_report_templates,
                grpclib.const.Cardinality.UNARY_UNARY,
                ListReportTemplatesRequest,
                ListReportTemplatesResponse,
            ),
            "/sift.report_templates.v1.ReportTemplateService/UpdateReportTemplate": grpclib.const.Handler(
                self.__rpc_update_report_template,
                grpclib.const.Cardinality.UNARY_UNARY,
                UpdateReportTemplateRequest,
                UpdateReportTemplateResponse,
            ),
        }
